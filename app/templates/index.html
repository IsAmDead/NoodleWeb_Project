<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ensuring responsive design -->
    <title>InstaNoodle</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Get the circle icons
    const spicinessCircle = document.getElementById('spicinessCircle');
    const ratingCircle = document.getElementById('ratingCircle');

    // Event listener for spiciness circle
    spicinessCircle.addEventListener('click', function() {
        const list = this.querySelector('.expanding-list');
        list.classList.toggle('hidden');
    });

    // Event listener for rating circle
    ratingCircle.addEventListener('click', function() {
        const list = this.querySelector('.expanding-list');
        list.classList.toggle('hidden');
    });
    
    // You might want to add logic to close the list if the user clicks outside of it.
});
</script>


<body>

    {% include "navbar.html" %}

    <header class="splash-screen">
        <h1>InstaNoodle</h1>
    </header>

    <main class="content-wrapper">

        <section>
            <form method="get" action="{{ url_for('home') }}" class="filter-form">
                <fieldset>
                    <legend>Filter Reviews</legend>
                    
                    <label for="company">Company:</label>
                    <select id="company" name="company" aria-label="Filter by company">
                        <option value="">All Companies</option>
                        {% for category in categories %}
                        <option value="{{ category.company }}">{{ category.company }}</option>
                        {% endfor %}
                    </select>
        
                    <label for="spiciness">Spiciness:</label>
                    <select id="spiciness" name="spiciness" aria-label="Filter by spiciness level">
                        <option value="">All Spiciness</option>
                        {% for value, emoji in SPICINESS_EMOJI_MAP.items() %}
                        <option value="{{ value }}">{{ emoji }}</option>
                        {% endfor %}
                    </select>
        
                    <label for="rating">Rating:</label>
                    <select id="rating" name="rating" aria-label="Filter by rating">
                        <option value="">All Ratings</option>
                        {% for value, emoji in RATING_EMOJI_MAP.items() %}
                        <option value="{{ value }}">{{ emoji }}</option>
                        {% endfor %}
                    </select>
        
                    <input type="submit" value="Filter" class="button" aria-label="Filter reviews">
                </fieldset>
            </form>
        </section>
        

        <section class="reviews-container" aria-label="Noodle reviews">
            {% for noodle in noodles %}
            <article class="review-card">
                <figure class="image-wrapper">
                    <img src="{{ url_for('static', filename='images/' + noodle.image) }}" alt="Image of {{ noodle.name }}" class="noodle-image">
                </figure>
                <div class="review-details">
                    <div class="noodle-rating">
                        <span class="label">Rating:</span>
                        {{ RATING_EMOJI_MAP[noodle.rating] }}
                    </div>
                    <div class="noodle-spiciness">
                        <span class="label">Spiciness:</span>
                        {{ SPICINESS_EMOJI_MAP[noodle.spiciness] }}
                    </div>
                    <div class="noodle-company">
                        <span class="label">Company:</span>
                        {{ noodle.category.company }}
                    </div>
                </div>
            </article>
            {% endfor %}
        </section>

    </main>

</body>

</html>
